<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>gold-miner-web</title>
    <link rel="shortcut icon" href="//gold-cdn.xitu.io/favicons/favicon.ico">
  </head>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script>
      const parse = function (search) {
        const arr = search.split('&')
        const result = {}

        arr.map((item) => {
          const params = item.split('=')
          result[params[0]] = params[1]
        })

        return result
      }

      const params = parse(location.search.substring(1))

      if (params.login) {
        const user = JSON.stringify({
          id: 1,
          username: '根号三',
          avatar: '/static/avatar.png',
          rules: ['admin'],
        })

        localStorage.setItem('user', user)
        location.href = '/'
      }

      if (params.logout) {
        localStorage.removeItem('user')
        location.href = '/'
      }

      window.__USER__ = localStorage.getItem('user')
    </script>
  </body>
</html>
